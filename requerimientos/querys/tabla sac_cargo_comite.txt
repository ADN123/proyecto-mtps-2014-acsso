CREATE TABLE `sac_cargo_comite` (
`id_cargo_comite`  int(11) NOT NULL AUTO_INCREMENT ,
`nombre_cargo_comite`  varchar(255) NOT NULL ,
PRIMARY KEY (`id_cargo_comite`)
)ENGINE=InnoDB;


ALTER TABLE `sac_empleado_institucion`
ADD COLUMN `id_cargo_comite`  int(11) NULL AFTER `id_tipo_representacion`,
ADD COLUMN `id_empleado_institucion_sustituye`  int(11) NULL AFTER `sindicato`;

ALTER TABLE `sac_empleado_institucion` ADD CONSTRAINT `fk_cargo_comite_empleado` FOREIGN KEY (`id_cargo_comite`) REFERENCES `sac_cargo_comite` (`id_cargo_comite`) ON DELETE RESTRICT ON UPDATE CASCADE;

ALTER TABLE `sac_empleado_institucion` ADD CONSTRAINT `fk_empleado_sustituye` FOREIGN KEY (`id_empleado_institucion_sustituye`) REFERENCES `sac_empleado_institucion` (`id_empleado_institucion`) ON DELETE SET NULL ON UPDATE CASCADE;

///////////////////////////////////

ALTER TABLE `sac_lugar_trabajo`
ADD COLUMN `necesita_comite`  int(11) NULL AFTER `estado`;

CREATE TABLE `sac_estado_verificacion` (
`id_estado_verificacion`  int(11) NOT NULL AUTO_INCREMENT ,
`nombre_estado_verificacion`  varchar(255) NOT NULL ,
PRIMARY KEY (`id_estado_verificacion`)
)
ENGINE=InnoDB
;

ALTER TABLE `sac_promocion`
DROP COLUMN `necesita_comite`,
ADD COLUMN `id_estado_verificacion`  int(11) NULL AFTER `observaciones`;

ALTER TABLE `sac_promocion` ADD CONSTRAINT `fk_estado_verificacion_promocion` FOREIGN KEY (`id_estado_verificacion`) REFERENCES `sac_estado_verificacion` (`id_estado_verificacion`) ON DELETE RESTRICT ON UPDATE CASCADE;


ALTER TABLE `sac_control_visita`
ADD COLUMN `fecha_capacitacion`  date NOT NULL AFTER `id_tematica`,
ADD COLUMN `facilitador`  varchar(255) NOT NULL AFTER `fecha_capacitacion`;

CREATE TABLE `sac_miembro_entrevistado` (
  `id_promocion` int(11) NOT NULL,
  `id_empleado_institucion` int(11) NOT NULL,
  KEY `fk_miembros_entrevistados_promocion` (`id_promocion`),
  KEY `fk_miembros_entrevistados_empleado_institucion` (`id_empleado_institucion`),
  CONSTRAINT `fk_miembros_entrevistados_promocion` FOREIGN KEY (`id_promocion`) REFERENCES `sac_promocion` (`id_promocion`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_miembros_entrevistados_empleado_institucion` FOREIGN KEY (`id_empleado_institucion`) REFERENCES `sac_empleado_institucion` (`id_empleado_institucion`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
